/*
  cmd: {{ .Cmd }}
  comments: {{ range .Comments }}{{ . }}
{{end}}
  method name: {{ .MethodName }}
  sql: {{ .SQL }}

  args: {{ range .Args }}
    - name: {{ .Name }}
      emit: {{ .Emit }}
      Struct: {{ .Struct }}
      type: {{ outputTsType .Type }}
{{ end }}

  ret: {{ with .Ret }}
    - name {{ .Name }}
      emit: {{ .Emit }}
      struct: {{ .Struct }}
      type: {{ .Type }}
{{ end }}
*/
{{ define "queryValue" -}}{{ if .Struct }}{{.Struct.Name}}{{ if .Type.IsArray }}[]{{end}}{{ else }}{{ outputTsType .Type
}}{{
end }}{{ end }}
export const {{ .MethodName }} = async (
{{- range $index, $arg := .Args -}}
    {{- if $index}}, {{end -}}
    {{ with $arg }}
        {{.Name }}{{ if .Type.IsNull }}?{{end}}: {{ if .Struct -}}
            {{- .Struct.Name -}}
        {{else -}}
            {{- outputTsType .Type -}}
        {{ end -}}
    {{ end -}}
{{end}}): Promise<{{ template "queryValue" .Ret }}> => {
}
